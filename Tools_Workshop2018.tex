% This is samplepaper.tex, a sample chapter demonstrating the
% LLNCS macro package for Springer Computer Science proceedings;
% Version 2.20 of 2017/10/04
%
\documentclass[runningheads]{llncs}
%
\usepackage{graphicx}
% Used for displaying a sample figure. If possible, figure files should
% be included in EPS format.
%
% If you use the hyperref package, please uncomment the following line
% to display URLs in blue roman font according to Springer's eBook style:
% \renewcommand\UrlFont{\color{blue}\rmfamily}

\usepackage{todonotes}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{mdframed}
%\usepackage{todo}
 
\begin{document}
%
\title{Saving Energy Using the READEX Methodology \thanks{The research leading to these results has received funding from the European Union's Horizon 2020 Programme under grant agreement number 671657.}}
%
%\titlerunning{Abbreviated paper title}
% If the paper title is too long for the running head, you can set
% an abbreviated paper title here
%
\author{Madhura Kumaraswamy \and Anamika Chowdhury \and Michael Gerndt \inst{1} \and
Second Author\inst{2} \and
Third Author\inst{3}}
%
\authorrunning{Kumaraswamy, M et al.}
% First names are abbreviated in the running head.
% If there are more than two authors, 'et al.' is used.
%
\institute{ Department of Informatics, Technical University of Munich, Bavaria, Germany 
\email{\{kumarasw,chowdhua,gerndt\}@in.tum.de}\\ \and
ABC Institute \email{@} \\ \and }

\maketitle              % typeset the header of the contribution

\begin{abstract}
The abstract should briefly summarize the contents of the paper in
150--250 words.

\keywords{First keyword  \and Second keyword \and Another keyword.}
\end{abstract}

\textcolor{blue}{General focus:
\begin{enumerate}
  \item This paper does not go into technical details, but aims to provide a general guide to interested users about what they can expect if they use READEX for energy tuning and the rational.
  \item Implementation aspects only if really necessary to understand what happens in the steps.
  \item No syntax examples, only if absolutely necessary.
  \item Very few pictures.
  \item Focus on motivating how things are done, what is the rational to use certain concepts and why he should take certain decisions, e.g., selection of search space of parameters should be done carefully to not run into a search explosion, where to put the phase region, what to do if there is inter-phase dynamism ...
\end{enumerate}
}


\section{Introduction} \label{sec:introduction}
\textbf{TUM (2 pages)} \\ 

The top 1 machine in the November 2018 version of the Top500 list is Summit at Oakridge National Laboratory. It consumes 9.8 MW with a peak performance of 200 PFlop/s. To reach the exascale level with this technology would already require 48 MW power. Therefore, energy reduction is a major goal for hardware, OS, runtime system, application, and tool developers. 

The European Horizon 2020 project READEX (Runtime Exploitation of Application Dynamism for Energy-efficient eXascale Computing) \footnote{www.readex.eu} funded from 2015-2018 developed the READEX Tool Suite for dynamic energy efficiency tuning of application. It semi-automatically tunes hybrid HPC applications by splitting the tuning into a Design-Time Analysis (DTA) and a Runtime Application Tuning phase (RAT). 

Of major impact on the power consumption of the processor is the clock frequency. The Haswell processors \todo{reference} that are used in the target machine Taurus at ZIH of TU Dresden allow to set the core and  uncore frequency. The basic idea is to lower the core frequency and increase the uncore frequency for memory bound regions since the processor is anyway waiting for data from memory.  Another important tuning parameter is the number of parallel OMP threads in a node. If a routine is memory bound, it might be more energy efficient to use only so many threads until the memory bandwidth is saturated. 

Following the scenario based tuning approach \cite{filippopoulos2013exploration} from the embedded world, the READEX Tool Suite creates an Application Tuning Model (ATM) at design-time which specifies optimal configurations of tuning parameters for individual program regions. This tuning model is then passed to RAT and is applied during production runs of the application by switching the tuning parameters to their optimal values when a tuned region is encountered. 

This dynamic tuning approach of READEX allows to exploit dynamic changes in the application characteristics for energy tuning. Static approaches \todo{reference static approaches} only optimize the settings for the entire program run. READEX applies a much more fine granular approach. 

The READEX Tool Suite even goes beyond tuning individual regions. It can distinguish different instances of regions, e.g., resulting from different call sites in the code. These instances, called runtime situations (rts), can have different optimal configurations in the ATM. 

The READEX Tool Suite leverages well established tools. For instrumentation and monitoring of the application the Score-P system is used. The READEX Runtime Library (RRL) implements RAT and is a new plugin for Score-P~\cite{knupfer2012score}. The DTA is implemented via new tuning plugins of the Periscope Tuning Framework~\cite{PTF2.0IEEE2016}.  

For reading energy measurements and for modifying core and uncore frequencies, several interfaces are supported. These are libmsrsave, libadapt, ad well as LIKWID~\cite{LIKWID}. Power measurements are based on the RAPL~\cite{Intel2018} counters or on special hardware, such as HDEEM~\cite{hdeem} on the Taurus machine in Dresden. If the target machine provides such special hardware new measurement plugins for Score-P have to be implemented. The availability of these interfaces is currently the major limitation for applying the READEX Tool Suite. Reading energy measurement as well as setting the frequencies requires root privileges and appropriate extensions to the kernel of the machine are required. 

This paper focuses on the features of the READEX Tool Suite, the steps to be taken by the user in applying the tools, and motivates why certain aspects are more or less suited for different applications. The paper is neither a user's guide nor a technical documentation of the inner workings of the tools comprising the tool suite. 

Section~\ref{sec:related-work} presents related available tools for energy management of HPC systems. Section~\ref{sec:methodology} introduces the major steps in using the READEX Tool Suites and presents Pathway \cite{Pathway:Petkov13}, a tool for automating tool workflows for HPC systems. Section~\ref{sec:dta} presents DTA as the first step in tuning applications. The reasoning behind the generation of the ATM at the end of DTA is given in Section~\ref{sec:tuning_model_generation}. Section~\ref{sec:tm-visualization} introduces a tool for the visual analysis of the generated ATM. RAT is presented in Section~\ref{rat} and the visualization of dynamic switching based on the given ATM in Vampir is introduced in Section~\ref{fig:switch_visualization}. Extensions of the READEX Tool Suite are presented in Section~\ref{sec:extensions} and results from several application on different machines are summarized in Section~\ref{sec:results}. Finally the paper draws some conclusions. 


\input{related_work.tex}
\input{readex_methodology.tex}
\input{dta.tex}
\input{tm_generation.tex}
\input{tm_visualization.tex}
\input{rat.tex}
\input{switching_visualization.tex}
\input{extensions.tex}
\input{atp.tex}
\input{acp.tex}
\input{input.tex}
\input{calibration.tex}
\input{results.tex}



\section{Conclusions} \label{sec:conclusions}
\textbf{0,5 page}



% ---- Bibliography ----
%
% BibTeX users should specify bibliography style 'splncs04'.
% References will then be sorted and formatted in the correct style.
 \bibliographystyle{splncs04}
 \bibliography{Tools_Workshop2018}
 \bibliography{References}

\end{document}
